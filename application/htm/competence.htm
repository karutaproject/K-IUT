<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Accueil du Eportfolio 4 &eacute;toiles</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
		<!-- =========================================== -->
		<link rel="stylesheet" type="text/css" href="../../other/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="../../other/css/bootstrap-responsive.min.css" />
		<link rel="stylesheet" type="text/css" href="../../other/css/bootstrap-wysihtml5.css" />
		<link rel="stylesheet" type="text/css" href="../../other/css/jquery-ui.css" />
		<link rel="stylesheet" type="text/css" href="../../other/css/font-awesome/css/font-awesome.min.css" />
		<link rel="stylesheet" type="text/css" href="../../karuta/css/karuta.css" />
		<link rel="stylesheet" type="text/css" href="../../karuta/css/welcome.css"/>
		<!-- =========================================== -->
		<link rel="stylesheet" href="../../application/css/specific.css" />
		<!-- =========================================== -->
		<script src="../../other/js/jquery-1.10.2.js"></script>
		<script src="../../other/js/jquery-ui-1.10.3.custom.min.js"></script>
		<script src="../../other/bootstrap/js/bootstrap.min.js"></script>
		<script src='../../other/wysihtml5/wysihtml5-0.3.0.js'> </script>
		<script src='../../other/wysihtml5/parser.js'> </script>
		<!--[if lt IE 9]>
			<script src='http://html5shiv.googlecode.com/svn/trunk/html5.js'></script>
		<![endif]-->
		<script src="../../other/js/bootstrap-wysihtml5.js"></script>
		<script src="../../other/js/jquery_hotkeys.js"></script>
		<!--script src="../../other/js/bootstrap-wysiwyg.js"></script-->
		<!-- =============================================================== -->
		<script src="../../karuta/js/model/Type_Portfolio.js"></script>
		<script src="../../karuta/js/model/Type_Node.js"></script>
		<script src="../../karuta/js/model/Type_User.js"></script>
		<!-- =============================================================== -->
		<script src="../../karuta/js/karuta.js"></script>
		<script src="../../karuta/js/UICom.js"></script>
		<!-- =============================================================== -->
		<link type="text/css" href="../../other/lightbox/css/lightbox.css" rel="stylesheet" />
		<script src="../../other/lightbox/js/lightbox-2.6.min.js"></script>
		<!-- =============================================================== -->
		<link type="text/css" href="../../other/jplayer/jplayer.blue.monday.css" rel="stylesheet" />
		<script src="../../other/jplayer/jquery.jplayer.min.js"></script>
		<!-- =============================================================== -->
		<script src="../../other/js/jquery.ui.widget.js"></script>
		<script src="../../other/js/jquery.iframe-transport.js"></script>
		<script src="../../other/js/jquery.fileupload.js"></script>
		<script src="../../other/js/JQueryRC4.js"></script>
		<!-- =============================================================== -->
		<script src="../../other/bootstrap-datepicker/bootstrap-datepicker.js"></script>
		<script src="../../other/bootstrap-datepicker/bootstrap-datepicker.fr.js"></script>
		<link rel="stylesheet" href="../../other/bootstrap-datepicker/datepicker.css" />
		<!-- =============================================================== -->
		<script src="../../karuta/js/resources/Type_Calendar.js"></script>
		<script src="../../karuta/js/resources/Type_Comments.js"></script>
		<script src="../../karuta/js/resources/Type_Document.js"></script>
		<script src="../../karuta/js/resources/Type_Proxy.js"></script>
		<script src="../../karuta/js/resources/Type_TextField.js"></script>
		<script src="../../karuta/js/resources/Type_Field.js"></script>
		<script src="../../karuta/js/resources/Type_Image.js"></script>
		<script src="../../karuta/js/resources/Type_Get_Resource.js"></script>
		<script src="../../karuta/js/resources/Type_Get_Get_Resource.js"></script>
		<script src="../../karuta/js/resources/Type_URL.js"></script>
		<script src="../../karuta/js/resources/Type_Item.js"></script>
		<script src="../../karuta/js/resources/Type_Video.js"></script>
		<script src="../../karuta/js/resources/Type_CompetencyEvaluation.js"></script>
		<!-- =============================================================== -->
		<script src="../../application/js/_init.js"></script>
		<!-- =============================================================== -->
		<script src="../../karuta/js/version.js"></script>
		<!-- =============================================================== -->
		<script src="../../karuta/js/languages/locale_fr.js"></script>
	<!-- =============================================================== -->
	<script src="../js/iut2.js"></script>
	<script src="../js/competence.js"></script>
	<script src="../js/profile.js"></script>
	<script src="../js/langue.js"></script>
	<script src="../js/test_perso.js"></script>
	<!-- =============================================================== -->
	<link rel="stylesheet" href="../css/specific.css" />
	
</head>
<body>
	<div id="container" class="container">

		<div id="navbar" class="navbar navbar-fixed-top"></div>

		<ol class="breadcrumb">
			<li><a id="accueil" href="#">Accueil</a><span class="divider">/</span></li>
			<li class="active">Mon e-portfolio<span class="divider">/</span></li>
			<li class="active">Mes compétences<span class="divider">/</span></li>
			<li id='view_label' class="active"></li>
		</ol>

		<h3 class="align-left">MES COMPÉTENCES</h3>

		<!-- ====================================================================== -->
		<div id="portfolio">
			<ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
				<li><a href="#resume" data-toggle="tab" onclick="$('#view_label').html(view_label['resume']);" class="text-noir">Vue d'ensemble</a></li>
				<li><a href="#metiers" data-toggle="tab" onclick="$('#view_label').html(view_label['metiers']);" class="text-vert">Métiers</a></li>
				<li><a href="#autres1" data-toggle="tab" onclick="$('#view_label').html(view_label['transinnov']);" class="text-bleu">Transversales</a></li>
				<li><a href="#autres2" data-toggle="tab" onclick="$('#view_label').html(view_label['autresperso']);" class="text-violet">Autres compétences personnelles</a></li>
				<li><a href="#langues" data-toggle="tab" onclick="$('#view_label').html(view_label['langues']);" class="text-gris">Langues</a></li>
				<li><a href="#traitsperso" data-toggle="tab" onclick="$('#view_label').html(view_label['traitsperso']);" class="text-rose">Traits de personnalité</a></li>
			</ul>

			<div id="my-tab-content" class="tab-content">
				<!-- ================================================================== -->
				<div class="tab-pane" id="resume">
					<div class="container">
						<div class="row">
							<div class="span6">
								<div class="alert alert-vert alert-block">
									<h3 align="center">Compétences par grands domaines métiers</h3>
									<div id="metiers-short"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
								</div>
							</div>
							<div class="span6">
								<div class="alert alert-block alert-bleu">
									<h3 align="center">Compétences transversales</h3>
									<div id="autres-short1"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
								</div>
								<div class="alert alert-block alert-violet">
									<h3 align="center">Autres compétences personnelles</h3>
									<div id="autres-short2"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
								</div>
								<div class="alert alert-block alert-gris">
									<h3 align="center">Langues étrangères</h3>
								<div id="langues-short"><h4><img src='../../karuta/img/ajax-loader.gif'/> <script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
								</div>
								<div class="alert alert-block alert-rose">
									<h3 align="center">Traits de personnalité</h3>
									<div id="traitsperso-short"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- ================================================================== -->
				<div class="tab-pane" id="metiers">
					<div class="row">
						<div class="span12">
							<div class="alert alert-vert alert-block">
								<div id="metiers-detail"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
							</div>
						</div>
					</div>
				</div>
				<!-- ================================================================== -->
				<div class="tab-pane" id="autres1">
					<div class="row">
						<div class="span12">
							<div class="alert alert-bleu alert-block">
								<div id="autres-detail1"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
							</div>
						</div>
					</div>
				</div>
				<!-- ================================================================== -->
				<div class="tab-pane" id="autres2">
					<div class="row">
						<div class="span12">
							<div class="alert alert-violet alert-block">
								<div id="autres-detail2"><h4><img src='../../karuta/img/ajax-loader.gif'/><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
							</div>
						</div>
					</div>
				</div>
				<!-- ================================================================== -->
				<div class="tab-pane" id="langues">
					<div class="row">
						<div class="span12">
							<div id="langues-detail"><h4><img src='../../karuta/img/ajax-loader.gif'><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
						</div>
					</div>
				</div>
				<!-- ================================================================== -->
				<div class="tab-pane" id="traitsperso">
					<!--blockquote>
						La sous-rubrique <b>"Traits de personnalité"</b> de "MON
						HISTORIQUE" affiche ...<br/><br/>
					</blockquote-->
					<div class="row">
						<div class="span12">
							<div id="traitsperso-detail"><h4><img src='../../karuta/img/ajax-loader.gif'><script language = 'javascript'>document.write(karutaStr[LANG]['loading'])</script></h4></div>
						</div>
					</div>
				</div>
				<!-- ================================================================== -->
			</div>
		</div>
	</div>
	<!-- ====================================================================== -->
	<div id="footer" class="container-fluid" ></div>
	<!-- ====================================================================== -->
	
	
	<script>document.write(EditBox());</script>
	<script>document.write(DeleteBox());</script>
	<script>document.write(savedBox());</script>
	<script language='javascript'>
		var portfolioid = getURLParameter('portfolioid');
		var profileid = getURLParameter('profileid');
		var view = getURLParameter('view');
		if (view == null)
			view = "resume";
		var view_label = new Array();
		view_label['resume'] = "Vue d'ensemble";
		view_label['metiers'] = "Métiers";
		view_label['transinnov'] = "Transversales et de l'innovation";
		view_label['autresperso'] = "Autres compétences personnelles";
		view_label['langues'] = "Langues";
		var l_userrole = 'etudiant';

		$(document).ready(function() {
			$("#accueil").attr("href","mainEtudiant.htm?portfolioid="+portfolioid);
			$("#footer").html(footer);
			$.ajaxSetup({async: false});
			//----------------
			$.ajax({
				type : "GET",
				dataType : "xml",
				url : "../../../"+serverBCK+"/credential",
				data: "",
				success : function(data) {
					USER = new UIFactory["User"]($("user",data));
					//----------------
					$.ajax({ // get group-role for the user
						Accept: "application/xml",
						type : "GET",
						dataType : "xml",
						url : "../../../"+serverBCK+"/credential/group/" + portfolioid,
						success : function(data) {
							var usergroups = $("group",data);
							g_userrole = $("role",usergroups[0]).text();
						}
					});
					//----------------
					$.ajax({
						type : "GET",
						dataType : "xml",
						url : "../../../"+serverBCK+"/portfolios/portfolio/" + portfolioid + "?resources=true",
						success : function(data) {
							UICom.parseStructure(data);
							UIFactory["Profile"].parse(proxies_data['proxy-profile']);
							//-----------------------------------------------
							var tableau = null;
							var htmlShort = "";
							var htmlDetail = "";
							//-----------------------------------------------
							tableau = searchCompetencies(data,'domaine-metier','activite','competence-metier');
							htmlShort +="<h4 style='text-align:right'>Provenant d'un référentiel</h4>"
							htmlShort += getShortCompetencies(tableau,1);
							htmlDetail +="<h4 style='text-align:right'>Provenant d'un référentiel</h4>"
							htmlDetail += getDetailCompetencies(tableau,1);
							//-----------------------------------------------
							tableau = searchFreeCompetencies(data,'dom-metier-ref','dom-metier-ref','free-comp-metier');
							htmlShort +="<h4  style='text-align:right'>Hors référentiel</h4>"
							htmlShort += getShortCompetencies(tableau,2);
							htmlDetail +="<h4  style='text-align:right'>Hors référentiel</h4>"
							htmlDetail += getDetailCompetencies(tableau,2);
							//----------------------------
							$("#metiers-short").html(htmlShort);
							$("#metiers-detail").html(htmlDetail);
							//-----------------------------------------------
							htmlShort = "";
							htmlDetail = "";
							//-----------------------------------------------
							tableau = searchCompetencies(data,null,'activite','competence-trans');
							htmlShort += getShortCompetencies(tableau,3);
							htmlDetail += getDetailCompetencies(tableau,3);
							comps2_objs = $("metadata[semantictag*='comps2a-autres']",data).parent()
							tableau = searchCompetencies(comps2_objs,null,'dom-autre-ref','free-comp-autre');
							htmlShort += getShortCompetencies(tableau,4);
							htmlDetail += getDetailCompetencies(tableau,4);
							comps2_objs = $("metadata[semantictag*='comps2b-autres']",data).parent()
							tableau = searchCompetencies(comps2_objs,null,'dom-autre-ref','free-comp-autre');
							htmlShort += getShortCompetencies(tableau,5);
							htmlDetail += getDetailCompetencies(tableau,5);
							//----------------------------
							$("#autres-short1").html(htmlShort);
							$("#autres-detail1").html(htmlDetail);
							//-----------------------------------------------
							htmlShort = "";
							htmlDetail = "";
							//-----------------------------------------------
							comps2_objs = $("metadata[semantictag*='comps2c-autres']",data).parent()
							tableau = searchCompetencies(comps2_objs,null,'dom-autre-ref','free-comp-autre');
							htmlShort += getShortCompetencies(tableau,6);
							htmlDetail += getDetailCompetencies(tableau,6);
							//----------------------------
							$("#autres-short2").html(htmlShort);
							$("#autres-detail2").html(htmlDetail);
							//--------------------
							UIFactory["Langue"].parse(data);
							Langues_Display('langues-short','short');
							Langues_Display('langues-detail','cv',$("asmUnit:has(metadata[semantictag='langues-unit'])", data).attr('id'),$("asmContext:has(metadata[semantictag='MotherTongue'])", data).attr('id'));
							//--------------------
							TestPerso_Display('traitsperso-short','short-result',$("asmContext:has(metadata[semantictag='test-perso'])", data).attr('id'));
							TestPerso_Display('traitsperso-detail','detail-result',$("asmContext:has(metadata[semantictag='test-perso'])", data).attr('id'));
							//-----------------------------------------------
							$("#view_label").html(view_label[view]);
							$("#tabs a[href='#"+view+"']").tab('show');
							$('a[data-toggle=tooltip]').tooltip({html:true});
							$(".fa.fa-search-plus").hover(function(){
								$('body').css('cursor', 'zoom-in');
								$('body').css('cursor', 'default');
							});
						}
					});
					//----------------
					var navbar = getNavbar(portfolioid);
					$("#navbar").html(navbar);
					if (l_userrole=='etudiant' && g_userrole!='etudiant'){
						profiles_list[0].displayView('profile-etudiant','lastname_firstname');
					}
					//----------------
			}
			});
		});
		
	</script>
</body>
</html>

